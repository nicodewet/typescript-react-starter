# Typescript React Starter

A quick start guide on how to wire up TypeScript with React.

Largely based on the [Microsoft Type Script React guide](https://github.com/Microsoft/TypeScript-React-Starter) with the following changes.

* Use yarn instead of npm.
* References to upstream documentation (in particular TypeScript and React documentation) where appropriate.
* Use Visual Studio Code.

Keep [Migrating from npm](https://yarnpkg.com/lang/en/docs/migrating-from-npm/) handy when using yarn.

## Install create-react-app

An initial project structure will be generated by [facebookincubator's create-react-app](https://github.com/facebookincubator/create-react-app).

```
$ yarn global add create-react-app
```

## Create a new project

Create a new project in the current directory. Note if you already have a README.md it will get renamed.

```
$ create-react-app . --scripts-version=react-scripts-ts
```

[Here](create-react-app-README.md) is the create-react-app generated README.md file for reference, of course renamed.

Sanity check that the auto generation works.

```
$ yarn start
```

Take note of the following files and *effective conventions*:

* tsconfig.js - contains Typescript-specific options for our project such as compiler options, excludes and types.
* tslint.json - our linter, [TSLint](https://palantir.github.io/tslint/), will be driven by settings in this file.
* package.json - naturally relevant dependencies and scripts (start, build, test, eject) that all use [react-scripts-ts](https://github.com/wmonk/create-react-app-typescript).
* public folder - static assets (HTML page we'll deploy to, images). index.html must be kept.
* src folder - typescript and css code. index.tsx is our file's entry point and must be kept.

## Run and Test

```
yarn start
```

Runs the start scipt specified in package.json

```
$ yarn test
```

Runs [Jest](https://facebook.github.io/jest/), a testing utility (test runner), by filtering files with a .test.ts or .spec.ts extension. Have a quick look at the [Jest Getting Started Guide](https://facebook.github.io/jest/docs/en/getting-started.html) if you have not used it before.

As with the *yarn start* command Jest will automatically run as soon as it detects changes. One way of working is to run both *yarn start* and *yarn test* concurrently in seperate terminal windows in order to both preview and test changes simultaneously.

Note that your test file, namely *App.text.tsx* is in the same directory as *App.test.tsx* which is different in terms of say the [Maven Standard Directory Layout](https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html) that Java developers may be accustomed to. We'll leave the structure as-is for now.

If you don't want to *watch* tests and want to exit after a test run, as per the [create-react-apps docs](https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#continuous-integration) use the CI flag which would be used on a continous integration server as naturally one would want CI jobs to
report a result.

```
$ CI=true yarn test
```

## Creating a production build

*yarn start* does not produce an optimized build in the sense that for example the code sent to users is not as fast and small as possible. Production builds
would perform optimizations such as minification on JS and CSS. To produce a production build and artifacts in build/static/js and build/static/css respectively run the following command.

```
$ yarn build
```

# Creating a Component

We'll create a *Hello* component that takes *name* and *enthusiasmLevel* parameters. 

We'll create *Hello.tsx* in the *src/components* directory. Remember that *.tsx* indicates that the file contains [JSX](https://www.typescriptlang.org/docs/handbook/jsx.html) syntax which is an embeddable XML-like syntax. You should
study the [JSX page](https://www.typescriptlang.org/docs/handbook/jsx.html)

```javascript
// src/components/Hello.tsx

import * as React from 'react';

export interface Props {
  name: string;
  enthusiasmLevel?: number;
}

function Hello({ name, enthusiasmLevel = 1 }: Props) {
  if (enthusiasmLevel <= 0) {
    throw new Error('You could be a little more enthusiastic. :D');
  }

  return (
    <div className="hello">
      <div className="greeting">
        Hello {name + getExclamationMarks(enthusiasmLevel)}
      </div>
    </div>
  );
}

export default Hello;

// helpers

function getExclamationMarks(numChars: number) {
  return Array(numChars + 1).join('!');
}
```

Although the *Hello.tsx* code may be conceptually intuitive, if you are new to both React and TypeScript here are some key references
to help you understand the code.

* The [TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/basic-types.html) and in particular [Interfaces](https://www.typescriptlang.org/docs/handbook/interfaces.html) and [Modules](https://www.typescriptlang.org/docs/handbook/modules.html)
* The [React.Component](https://facebook.github.io/react/docs/react-component.html) page and in particular the [Components and Props](https://facebook.github.io/react/docs/components-and-props.html) page which introduced the notion of *Functional and Class Components* since we have a **stateless functional component (SFC)** in *Hello.tsx*.














